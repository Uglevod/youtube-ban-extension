#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è ZIP —Ñ–∞–π–ª–∞ –¥–ª—è Chrome

echo "üîß –°–æ–∑–¥–∞–Ω–∏–µ ZIP —Ñ–∞–π–ª–∞ –¥–ª—è Chrome"
echo "================================="

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π ZIP –µ—Å–ª–∏ –µ—Å—Ç—å
if [ -f "YBan-Chrome.zip" ]; then
    echo "üóëÔ∏è  –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π ZIP —Ñ–∞–π–ª..."
    rm YBan-Chrome.zip
fi

# –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É –¥–ª—è —Å–±–æ—Ä–∫–∏
TEMP_DIR="temp_chrome"
if [ -d "$TEMP_DIR" ]; then
    rm -rf "$TEMP_DIR"
fi

echo "üìÅ –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É..."
mkdir "$TEMP_DIR"

# –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
echo "üìã –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è..."

# –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
cp manifest.json "$TEMP_DIR/"
cp background.js "$TEMP_DIR/"
cp content.js "$TEMP_DIR/"
cp popup.html "$TEMP_DIR/"
cp popup.js "$TEMP_DIR/"
cp popup.css "$TEMP_DIR/"
cp styles.css "$TEMP_DIR/"

# –ü–∞–ø–∫–∞ —Å –∏–∫–æ–Ω–∫–∞–º–∏
cp -r icons "$TEMP_DIR/"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É ZIP..."
ls -la "$TEMP_DIR/"

# –°–æ–∑–¥–∞–µ–º ZIP –∞—Ä—Ö–∏–≤
echo "üì¶ –°–æ–∑–¥–∞–µ–º ZIP –∞—Ä—Ö–∏–≤..."
cd "$TEMP_DIR"
zip -r ../YBan-Chrome.zip . -x "*.DS_Store" "*.git*" "test_*" "*.md" "*.sh"
cd ..

# –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É
echo "üßπ –û—á–∏—â–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã..."
rm -rf "$TEMP_DIR"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–π ZIP
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–π ZIP..."
echo "üìä –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:"
ls -lh YBan-Chrome.zip

echo ""
echo "üéâ ZIP —Ñ–∞–π–ª –¥–ª—è Chrome —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!"
echo "üìÅ –§–∞–π–ª: YBan-Chrome.zip"
echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ Chrome:"
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ Chrome"
echo "2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ chrome://extensions/"
echo "3. –í–∫–ª—é—á–∏—Ç–µ '–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞'"
echo "4. –ù–∞–∂–º–∏—Ç–µ '–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ'"
echo "5. –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É —Å —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–º ZIP"
echo ""
echo "üìã –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ZIP —Ñ–∞–π–ª:"
echo "1. –†–∞—Å–ø–∞–∫—É–π—Ç–µ YBan-Chrome.zip"
echo "2. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ"
